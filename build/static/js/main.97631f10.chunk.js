(this["webpackJsonpfullstack-open-2020-part3-thephonebook"]=this["webpackJsonpfullstack-open-2020-part3-thephonebook"]||[]).push([[0],{42:function(e,n,t){},50:function(e,n,t){"use strict";t.r(n);var c=t(0),a=t(2),r=t.n(a),o=t(19),u=t.n(o),i=t(7),s=t(20),l=t(3),d=t(5),h=t.n(d),j="/api/persons",b={getAll:function(){return h.a.get(j).then((function(e){return e.data}))},create:function(e){return h.a.post(j,e).then((function(e){return e.data}))},update:function(e,n){return h.a.put("".concat(j,"/").concat(e),n).then((function(e){return e.data}))},deletePerson:function(e){return h.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))}},f=(t(42),t(43),function(e){var n=e.message;return null===n?null:Object(c.jsx)("div",{className:"error",children:n})}),m=function(e){var n=e.search,t=e.handleSearchChange;return Object(c.jsx)("form",{children:Object(c.jsxs)("div",{children:["Search People:",Object(c.jsx)("input",{value:n,onChange:t})]})})},O=function(e){var n=e.addPerson,t=e.newName,a=e.handleNameChange,r=e.newNumber,o=e.handleNumberChange;return Object(c.jsxs)("form",{onSubmit:n,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:t,onChange:a})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:r,onChange:o})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){var n=e.persons,t=e.search,a=e.showAll,r=e.handlePersonDelete,o=a?n:n.filter((function(e){return!0===(e.name.toLowerCase().includes(t.toLowerCase())||e.number.toString().includes(t))}));return Object(c.jsx)(c.Fragment,{children:o.map((function(e){return Object(c.jsxs)("div",{children:[e.name,": ",e.number,Object(c.jsx)("button",{onClick:function(){return r(e)},children:"delete"})]},e.name)}))})},g=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],r=n[1],o=Object(a.useState)(""),u=Object(l.a)(o,2),d=u[0],h=u[1],j=Object(a.useState)(""),g=Object(l.a)(j,2),x=g[0],v=g[1],w=Object(a.useState)(!0),S=Object(l.a)(w,2),N=S[0],C=S[1],P=Object(a.useState)(""),k=Object(l.a)(P,2),y=k[0],A=k[1],D=Object(a.useState)(null),J=Object(l.a)(D,2),T=J[0],E=J[1];Object(a.useEffect)((function(){b.getAll().then((function(e){r(e)}))}),[]);return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(f,{message:T}),Object(c.jsx)(m,Object(i.a)({},{search:y,handleSearchChange:function(e){""===y&&(C(!0),A(e.target.value)),C(!1),A(e.target.value)}})),Object(c.jsx)("h2",{children:"Add a New Person"}),Object(c.jsx)(O,Object(i.a)({},{addPerson:function(e){e.preventDefault();var n={name:d,number:x};if(t.some((function(e){return e.name===n.name}))){var c=t.find((function(e){return e.name===n.name}));window.confirm("Person ".concat(d,": \n already exists, replace old number with new one?"))&&b.update(c.id,n).then((function(e){var n=Object(s.a)(t);n[t.indexOf(c)]=e,r(n),v(""),v(""),E("".concat(c.name," information updated...")),setTimeout((function(){E(null)}),5e3)})).catch((function(e){E("".concat(JSON.stringify(e.response.data.error)," ")),setTimeout((function(){E(null)}),5e3),h(""),v("")}))}else b.create(n).then((function(e){r(t.concat(e)),h(""),v(""),E("".concat(e.name," added!")),setTimeout((function(){E(null)}),5e3)})).catch((function(e){console.log(e.response.data.error);var n=JSON.stringify(e.response.data.error);E("".concat(n)),setTimeout((function(){E(null)}),5e3)}))},newName:d,handleNameChange:function(e){h(e.target.value)},newNumber:x,handleNumberChange:function(e){v(e.target.value)}})),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(p,Object(i.a)({},{persons:t,search:y,showAll:N,handlePersonDelete:function(e){window.confirm("Do you really want to delete ".concat(e.name,"?"))&&b.deletePerson(e.id).then((function(e){return e})).then((function(e){b.getAll().then((function(e){r(e)}))})).catch((function(e){return console.log(e)}))}}))]})};u.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(g,{})}),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.97631f10.chunk.js.map